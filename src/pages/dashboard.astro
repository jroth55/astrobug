---
export const prerender = false;
import BaseLayout from '../layouts/BaseLayout.astro';

const session = await Astro.session.get('user');
const { env } = Astro.locals.runtime;
const userData = session?.id ? await env.CACHE.get(`user:${session.id}`, 'json') : null;
---
<BaseLayout title="Dashboard">
  <main class="container mx-auto px-4 py-16">
    <h1 class="text-3xl font-bold">Welcome back, {userData?.name ?? 'Guest'}</h1>
    <p class="text-secondary">This page renders fresh on every request.</p>
  </main>
</BaseLayout>
