---
export const prerender = false;
import BaseLayout from '../../layouts/BaseLayout.astro';

Astro.response.headers.set('Cache-Control', 's-maxage=300, stale-while-revalidate=60');

const { slug } = Astro.params;
const post: { title: string; content: string } = await fetch(
  `https://api.example.com/posts/${slug}`
).then((r) => r.json());
---
<BaseLayout title={post.title}>
  <article class="prose mx-auto px-4 py-16">
    <h1>{post.title}</h1>
    <p class="text-sm text-secondary">
      Cached for 5 minutes. Last rendered: {new Date().toISOString()}
    </p>
    <div set:html={post.content} />
  </article>
</BaseLayout>
